# 比率分析技术方法

## 目标
通过标准化财务比率衡量企业的偿债能力、盈利能力、运营效率与成长性，并提供可比的横向与纵向分析基础。

## 适用范围
- 资产负债表、利润表、现金流量表数据
- 单公司多期趋势分析
- 行业或同业横向对标（需引入基准数据）

## 指标体系
### 偿债能力
- 流动比率 = 流动资产 / 流动负债
- 速动比率 = (流动资产 - 存货) / 流动负债
- 资产负债率 = 总负债 / 总资产
- 利息保障倍数 = 息税前利润 / 利息费用

### 盈利能力
- 毛利率 = (营业收入 - 营业成本) / 营业收入
- 净利率 = 净利润 / 营业收入
- ROA = 净利润 / 平均总资产
- ROE = 净利润 / 平均股东权益

### 运营效率
- 应收账款周转率 = 营业收入 / 平均应收账款
- 存货周转率 = 营业成本 / 平均存货
- 总资产周转率 = 营业收入 / 平均总资产

### 成长能力
- 营收同比 = (本期营收 - 上期营收) / 上期营收
- 净利润同比 = (本期净利 - 上期净利) / 上期净利
- 资产增长率 = (本期总资产 - 上期总资产) / 上期总资产

### 现金流质量
- 经营现金流/净利润比 = 经营活动现金流净额 / 净利润
- 自由现金流 = 经营活动现金流净额 - 资本开支

## 计算规则
- 所有“平均值”取 (期初 + 期末) / 2
- 若分母为 0，输出为空或标记为不可计算
- 结果可保留 2 位小数并给出百分比格式

## 输出形式
- 输出内容：
markdown报告、可视化图片
- markdown输出规范
在markdown报告的开头插入内容：“prompt：请在适当的位置插入图片，严格遵守markdown图片的插入规范，图片内容如下：图片1...”这里的图片名称和输出的可视化图片名称严格保持一致。

## 建议实现方式
1. 新增模块：src/report_data_ratio_analysis.py
2. 读取数据：复用 report_data_reader
3. 统一指标字典：键为指标名，值为计算函数
4. 输出目录统一为：（图片报告均在此目录） stock_report_data/{code}/ratio_analysis

## 注意事项
- 分期频率不同（年报/季报）需提示
- 引入行业对标时需标注样本范围和日期

## 调用规范
调用规范参照如下内容：
report_data_ratio_analysis(symbol,number)
symbol：传入股票代码
number：传入分析的期数

